<!-- 
Developer Name: Brendon Lee Yi Hao
Course Name: BSc (Hons) Software Engineering
Last Modified: 5/7/2023
 -->

<br><br><br>
<div class="mx-auto max-w-7xl py-6 sm:px-6 lg:px-8">
        <div class="login-dual-container">
            <div style="margin:0 35px;max-width:1000px; display:flex">
            <div style="position:relative;flex:1;margin-right:5px;">
                <img src="/assets/image/StudyRoomImage.jpg" style="border-radius:20px;opacity:0.8;max-width:400px;box-shadow: 0 0 10px rgba(0, 0, 0, 0.2), -2px -2px 4px rgba(255, 255, 255, 0.877), inset -20px -20px 4px rgb(237, 233, 233);transform: skew(-10deg);position: absolute; top: 0; left: 0; width: 100%; height: 100%;z-index: -1;">
                <div style="position:relative;">
                    <div style="background-color:rgba(236, 199, 199, 0.854);padding:30px 30px;max-width:500px;margin:auto;border-radius:20px;box-shadow: 0 0 10px rgba(0, 0, 0, 0.2), -2px -2px 4px rgba(255, 255, 255, 0.877), inset -20px -20px 4px rgb(237, 233, 233);transform: skew(-10deg)">
                            <h1 class="text-2xl font-bold italic">Login</h1><br>
                            <div style="margin:auto;max-width:500px">
                                <form nz-form [formGroup]="validateForm" class="login-form" (ngSubmit)="submitForm()">
                                    <nz-form-item>
                                        <nz-form-control nzErrorTip="Please input your username!">
                                            <nz-input-group nzPrefixIcon="user" nzSize="large">
                                                <input type="text" nz-input formControlName="username" placeholder="Username" />
                                            </nz-input-group>
                                        </nz-form-control>
                                    </nz-form-item>
                                    
                                    <nz-form-item>
                                        <nz-form-control nzErrorTip="Please input your Password!">
                                            <nz-input-group nzPrefixIcon="lock" nzSize="large" [nzSuffix]="suffixTemplate">
                                                <input [type]="passwordVisible ? 'text': 'password'" nz-input formControlName="password" placeholder="Password" />
                                            </nz-input-group>
                                            <ng-template #suffixTemplate>
                                                <span nz-icon [nzType]="passwordVisible ? 'eye-invisible' : 'eye'" (click)="passwordVisible = !passwordVisible"></span>
                                            </ng-template>
                                        </nz-form-control>
                                    </nz-form-item>
                                    
                                    <nz-form-item>
                                        <nz-form-control nzErrorTip="Please select your UserType">                
                                            <nz-select formControlName="userType" nzSize="large">
                                                <nz-option nzLabel="APU Student/Staff" nzValue="APU Student/Staff"></nz-option>
                                                <nz-option nzLabel="APU Librarian" nzValue="APU Librarian" ></nz-option>
                                                <nz-option nzLabel="Public User" nzValue="Public User"></nz-option>
                                            </nz-select>              
                                        </nz-form-control>
                                    </nz-form-item>
                                    <div nz-row class="login-form-margin">
                                        <div nz-col [nzSpan]="24">
                                            <a (click)="openModal()" class="text-sky-600">Forgotten Password</a>
                                        </div>
                                    </div>
                                    <button nz-button nzSize="large" class="login-form-button login-form-margin bg-sky-200" style="width:100%;border-radius:20px;">Log in</button>
                                    <p style="text-align:center;margin-top:-5px">OR</p><br>
                                    <button nz-button nzSize="large" routerLink="/registerpublic" routerLinkActive="active" class="login-form-button login-form-margin" [nzType]="'primary'" style="background-color:darkkhaki;width:100%;border-radius:20px;margin-top:-5px">Register now!</button>
                                </form>
                            </div>
                        </div>
                </div>
            </div>
            
        </div>
    </div>

</div>

<nz-modal [(nzVisible)]="isVisible" nzTitle="Forgotten Password" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
    <ng-container *nzModalContent>
        Kindly provide your registered email. We will send a new password via your email!
        <br><br>
        <form nz-form [formGroup]="retrievePasswordForm">
            <nz-form-item>
                <nz-form-label nzRequired>Email</nz-form-label>
                <nz-form-control nzHasFeedback [nzErrorTip]="emailErrorTpl">
                    <input nz-input formControlName="email" class="p-1 bg-slate-100">
                    <ng-template #emailErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">Email is required!</ng-container>
                    </ng-template>
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-container>
</nz-modal>
<br><br><br>